<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Medical Utility Tool</title>
  <style>
    /* CSS unchanged */
  </style>
</head>
<body>
  <!-- Unchanged UI HTML above -->
  <div id="formulary-results">Enter a search term and click Search.</div>
  
  <script>
    // unchanged code up to searchFormulary()

    function searchFormulary() {
      const term = searchInput.value.trim().toLowerCase();
      if (!term) {
        resultsContainer.textContent = 'Please enter a search term.';
        return;
      }
      const filtered = formularyData.filter(item => 
        item['Drug Ingredient'] && 
        item['Reference Brand Name'] && 
        item['Drug Ingredient'].toLowerCase().includes(term)
      );
      if (filtered.length === 0) {
        resultsContainer.textContent = 'No matching drugs found.';
        return;
      }
      // Show search results
      const html = filtered.map((item, idx) => {
        const drug = item['Drug Ingredient'];
        const brand = item['Reference Brand Name'];
        const citation = item['General citation (All body parts)'] || '';
        const id = `citation-${idx}`;
        return `
          <div class="formulary-entry">
            <span>${drug} â€” ${brand}</span>
            <button onclick="copyCitationById('${id}')">Copy</button>
            <pre id="${id}" style="display:none">${citation}</pre>
          </div>`;
      }).join('');
      resultsContainer.innerHTML = html;
    }

    function copyCitationById(id) {
      const text = document.getElementById(id)?.textContent || '';
      navigator.clipboard.writeText(text).then(() => {
        const ghost = document.getElementById('copy-ghost');
        ghost.style.display = 'block';
        setTimeout(() => ghost.style.display = 'none', 5000);
      }).catch(() => alert('Copy failed'));
    }

    // Event listeners (unchanged)
  </script>
</body>
</html>
